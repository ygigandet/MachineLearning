# Data

```{r, echo = FALSE, message = FALSE}
source(here::here("scripts/setup.R"))
```
<div>
For our project, we will be providing a prediction of the Premier League rankings. We will be using several datasets to which we will apply different models to get a prediction then test its accuracy.

The first dataset is called `game_results` containing the results of 4'560 Premier League games (380 games over 12 seasons from 2006/2007 to 2017/2018). The below are the variables in the dataset and their details:
</div>
 + `home_team` - Team playing in their home stadium.
 + `away_team` - Team playing in the stadium of their opponent.
 + `home_goals` - Number of goals scored by the home team.
 + `away_goals` - Number of goals scored by the away team
 + `results` - Winner of the match (H-home team, A-away team, D-draw)
 + `season` - Mentions the season in which the match took place


```{r echo=FALSE, include=FALSE}
# Importing the games_results dataset into R
setwd(here::here(("Data/")))

game_results <- readr::read_csv("results.csv")
```

```{r, echo=FALSE}
# Show the dataset

game_results[1:5,] %>% 
  rename("home team" = home_team,
         "away team" = away_team,
         "home goals" = home_goals,
         "away goals" = away_goals) %>% 
  knitr::kable(caption = "**Table 1: Premier League results (from 2006 to 2018)**") %>% 
  kable_styling(bootstrap_options = c("striped","hover","condensed"),
                fixed_thead = T)
```

<br>

The second dataset `team_stats` is about the statistics of each team in every season from 2006/2007 to 2017/2018. This dataset splits the statistics into 5 categories: general, attack, defence, team play and others. These categories are shown as follows in the dataset:

  + `General` - Columns 1-6
  + `Attack` -  Columns 7-16
  + `Defence` - Columns 17-29
  + `Team Player` - Columns 30-35
  + `Others` - Columns 36-42


```{r, echo=FALSE, include=FALSE}
# Importing the team_stats dataset into R
setwd(here::here(("Data/")))

team_stats <- readr::read_csv("stats.csv")
```

```{r, echo=FALSE}
# Show the dataset

team_stats[1:5,] %>% 
  select(team, wins, losses, goals, total_yel_card, total_scoring_att, saves, season) %>% 
  rename("total yellow cards" = total_yel_card,
         "total scoring attempts" = total_scoring_att) %>% 
  knitr::kable(caption = "**Table 2: Premier League teams statistics (from 2006 to 2018)**") %>% 
 kable_styling(bootstrap_options = c("striped","hover","condensed"),
                fixed_thead = T)
```
<br>
The third dataset `players_stats` is about the statistics of the players of the Premier League until September 2020. This dataset contains 59 variable combining all details for each Premier League player such as their club, position, nationality, wins, losses, passes, saves, and much more.

```{r, echo=FALSE, include=FALSE}
# Importing the players_stats dataset into R
setwd(here::here(("Data/")))

players_stats <- readr::read_csv("dataset - 2020-09-24.csv")
```

```{r, echo=FALSE}
players_stats[1:5,] %>% 
  select(Name, Club, Position, Appearances, Wins, Passes, Saves) %>% 
  knitr::kable(caption = "**Table 3: Premier League players statistics (until 2020)**") %>% 
  kable_styling(bootstrap_options = c("striped","hover","condensed"),
                fixed_thead = T)
  
```
<br>
The last dataset which we will be using is `players_value` contains information about the market value for the season 2016/2017. This dataset contains 17 variables and 461 entries. Each entry corresponds to a player, the club he plays with, his age, his position, his market value, and other details about him. 

```{r, echo=FALSE, include=FALSE}
# Importing the players_value dataset into R
setwd(here::here(("Data/")))

players_value <- readr::read_csv("england_premier_league_players_data.csv")
```

```{r, echo=FALSE}
players_value[1:5,] %>% 
  select(name, club, age, position, market_value) %>% 
  rename("market value" = market_value) %>% 
  knitr::kable(caption = "**Table 4: Premier League players market values (season 2016/2017)**") %>% 
  kable_styling(bootstrap_options = c("striped","hover","condensed"),
                fixed_thead = T)
```

```{r}
# Write CSV files

setwd(here::here("data/"))
write_csv(game_results,"game_results_cleaned.csv")
write_csv(team_stats,"team_stats_cleaned.csv")
write_csv(players_stats,"players_stats_cleaned.csv")
write_csv(players_value,"players_value_cleaned.csv")
```